"use strict";var _firebaseConfig=require("./firebaseConfig.js"),_firebaseFirestore=require("https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js");function obtenerRol(r){var n,t,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_firebaseFirestore.doc)(_firebaseConfig.db,"usuarios",r),e.next=3,regeneratorRuntime.awrap((0,_firebaseFirestore.getDoc)(n));case 3:if((t=e.sent).exists())return o=t.data(),e.abrupt("return",o.rol||null);e.next=9;break;case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}})}document.getElementById("btnLogin").addEventListener("click",function(){var r,n,t,o,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementById("email").value.trim(),n=document.getElementById("password").value.trim(),e.prev=2,e.next=5,regeneratorRuntime.awrap((0,_firebaseConfig.signInWithEmailAndPassword)(_firebaseConfig.auth,r,n));case 5:return t=e.sent,o=t.user,console.log("Usuario autenticado:",o.email),e.next=10,regeneratorRuntime.awrap(obtenerRol(o.uid));case 10:a=e.sent,console.log("Rol:",a),"admin"===a?(alert("Bienvenido administrador"),window.location.href="dashboardAdmin.html"):"user"===a&&(alert("Inicio de sesión exitoso"),window.location.href="index-2.html"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Error en el inicio de sesión:",e.t0.message),alert("Error: "+e.t0.message);case 19:case"end":return e.stop()}},null,null,[[2,15]])}),document.getElementById("btnGoogle").addEventListener("click",function(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap((0,_firebaseConfig.signInWithPopup)(_firebaseConfig.auth,_firebaseConfig.googleProvider));case 3:r=e.sent,console.log("Usuario autenticado con Google:",r.user),alert("Inicio de sesión con Google exitoso"),window.location.href="index-2.html",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error con Google:",e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,9]])}),document.getElementById("btnGitHub").addEventListener("click",function(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap((0,_firebaseConfig.signInWithPopup)(_firebaseConfig.auth,_firebaseConfig.githubProvider));case 3:r=e.sent,console.log("Usuario autenticado con GitHub:",r.user),alert("Inicio de sesión con GitHub exitoso"),window.location.href="index-2.html",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error con GitHub:",e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,9]])}),document.getElementById("btnMicrosoft").addEventListener("click",function(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap((0,_firebaseConfig.signInWithPopup)(_firebaseConfig.auth,_firebaseConfig.microsoftProvider));case 3:r=e.sent,console.log("Usuario autenticado con Microsoft:",r.user),alert("Inicio de sesión con Microsoft exitoso"),window.location.href="index-2.html",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error con Microsoft:",e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,9]])}),document.getElementById("registerEmail").addEventListener("click",function(r){var n,t,o,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=document.getElementById("email").value.trim(),t=document.getElementById("password").value.trim(),""===n||""===t)return alert("Por favor, ingresa un correo y una contraseña."),e.abrupt("return");e.next=6;break;case 6:return e.prev=6,e.next=9,regeneratorRuntime.awrap((0,_firebaseConfig.createUserWithEmailAndPassword)(_firebaseConfig.auth,n,t));case 9:return o=e.sent,a=o.user,e.prev=11,e.next=14,regeneratorRuntime.awrap((0,_firebaseFirestore.setDoc)((0,_firebaseFirestore.doc)(_firebaseConfig.db,"usuarios",a.uid),{email:a.email,rol:"user",uid:a.uid,createdAt:new Date}));case 14:console.log("Usuario guardado correctamente en Firestore"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),console.error("Error al guardar en Firestore:",e.t0.message);case 20:alert("Registro exitoso. Bienvenido, "+a.email),e.next=27;break;case 23:e.prev=23,e.t1=e.catch(6),console.error("Error en el registro:",e.t1.message),alert("Error: "+e.t1.message);case 27:case"end":return e.stop()}},null,null,[[6,23],[11,17]])});
//# sourceMappingURL=login.min.js.map
